// ... dentro lo script di index.html ...
const _supabase = supabase.createClient('TUO_URL', 'TUA_KEY');

async function caricaDati() {
    // CAMBIATO: da 'prodotti' a 'tickets'
    const { data, error } = await _supabase.from('tickets').select('*');
    if (error) return console.error(error);
    
    const tbody = document.getElementById('lista-body');
    tbody.innerHTML = data.map(item => `
        <tr>
            <td>${item.id}</td>
            <td>${item.nome}</td>
            <td>${item.descrizione}</td>
            <td>
                <button onclick="location.href='form.html?id=${item.id}'">Modifica</button>
                <button onclick="eliminaRecord(${item.id})" style="color:red">Elimina</button>
            </td>
        </tr>
    `).join('');
}

async function eliminaRecord(id) {
    if (confirm("Vuoi davvero eliminare questo ticket?")) {
        const { error } = await _supabase.from('tickets').delete().eq('id', id);
        if (error) alert(error.message);
        else caricaDati(); // Ricarica la lista aggiornata
    }
}
caricaDati();
